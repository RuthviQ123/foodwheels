<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png', _external=True) }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico', _external=True) }}">
    <title>Checkout - FoodWheels</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='checkout.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="{{ url_for('home') }}">
                <img src="{{ url_for('static', filename='images/logo.webp') }}" alt="Logo">
            </a>
        </div> 
        <div class="title"> 
            <h2>Checkout</h2>
        </div>
        <div class="auth-buttons">
            <a href="{{ url_for('cart_page') }}" class="cart-icon">
                <i class="fa-solid fa-cart-shopping"></i>
            </a>
            {% if user %}
                <div class="dropdown">
                    <button class="btn account-btn">Hi, {{ user.first_name }}</button>
                    <div class="dropdown-content">
                        <a href="{{ url_for('my_orders') }}">My Orders</a>
                        <a href="{{ url_for('my_bookings') }}">My Bookings</a>
                        <a href="{{ url_for('logout') }}">Logout</a>
                    </div>
                </div>
            {% else %}
                <a href="{{ url_for('signup') }}" class="btn">Sign Up</a>
                <a href="{{ url_for('login') }}" class="btn">Login</a>
            {% endif %}
        </div>
    </header>

    <div class="checkout-container">
        <form class="checkout-forms" method="POST" action="{{ url_for('place_order') }}" id="checkout-forms">
            <div class="checkout-form">
                <h2>Shipping Address</h2>
                <div class="form-group">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" value="{{ user.first_name }} {{ user.last_name }}" required>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" value="{{ user.email }}" required>
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" placeholder="123 Main St" required>
                </div>
                <div class="form-group">
                    <label for="city">City</label>
                    <input type="text" id="city" name="city" placeholder="Your City" required>
                </div>
            </div>
            <div class="checkout-form">
                <h2>Payment Details (Simulated)</h2>
                <div class="form-group">
                    <label for="card-name">Name on Card</label>
                    <input type="text" id="card-name" name="card_name" placeholder="John M. Doe">
                </div>
                <div class="form-group">
                    <label for="card-number">Card Number</label>
                    <input type="text" id="card-number" name="card_number" placeholder="1111-2222-3333-4444">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="card-exp">Exp (MM/YY)</label>
                        <input type="text" id="card-exp" name="card_exp" placeholder="MM/YY">
                    </div>
                    <div class="form-group">
                        <label for="card-cvc">CVC</label>
                        <input type="text" id="card-cvc" name="card_cvc" placeholder="123">
                    </div>
                </div>
            </div>
        </form>
        <div class="order-summary">
            <h2>Order Summary</h2>
            {% for item_id, item in cart.items() %}
            <div class="summary-item">
                <span class="item-name">{{ item.quantity }} x {{ item.name }}</span>
                <span class="item-price">${{ "%.2f"|format(item.price * item.quantity) }}</span>
            </div>
            {% endfor %}
            <hr>
            <div class="summary-line">
                <span>Subtotal:</span>
                <span>${{ "%.2f"|format(total_price) }}</span>
            </div>
            <div class="summary-line">
                <span>Delivery Fee:</span>
                <span>$5.00</span>
            </div>
            <hr>
            <div class="summary-line total">
                <span>Total:</span>
                <span>${{ "%.2f"|format(total_price + 5.00) }}</span>
            </div>
            <button type="submit" class="btn-checkout" form="checkout-forms">
                Place Order
            </button>
        </div>
    </div>
    <footer>
        <p>&copy; 2025 Food Ordering App. All rights reserved.</p>
    </footer>
</body>
</html>